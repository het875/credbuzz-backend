# Generated by Django 5.2.6 on 2025-11-11 15:34

import django.core.validators
import django.db.models.deletion
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='Branch',
            fields=[
                ('id', models.BigAutoField(primary_key=True, serialize=False)),
                ('branch_code', models.CharField(db_index=True, max_length=5, unique=True)),
                ('branch_name', models.CharField(max_length=200)),
                ('address_line1', models.CharField(max_length=255)),
                ('address_line2', models.CharField(blank=True, max_length=255, null=True)),
                ('address_line3', models.CharField(blank=True, max_length=255, null=True)),
                ('city', models.CharField(max_length=100)),
                ('state', models.CharField(max_length=100)),
                ('country', models.CharField(default='India', max_length=100)),
                ('pincode', models.CharField(max_length=6)),
                ('phone', models.CharField(max_length=15, unique=True)),
                ('email', models.EmailField(max_length=254, unique=True)),
                ('manager_name', models.CharField(max_length=100)),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('referred_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='sub_branches', to='accounts.branch')),
            ],
            options={
                'verbose_name': 'Branch',
                'verbose_name_plural': 'Branches',
                'ordering': ['branch_name'],
            },
        ),
        migrations.CreateModel(
            name='UserAccount',
            fields=[
                ('id', models.BigAutoField(primary_key=True, serialize=False)),
                ('user_code', models.CharField(db_index=True, max_length=6, unique=True)),
                ('email', models.EmailField(db_index=True, max_length=254, unique=True)),
                ('mobile', models.CharField(db_index=True, max_length=15)),
                ('password', models.CharField(max_length=128)),
                ('user_role', models.CharField(choices=[('super_admin', 'Super Admin'), ('admin', 'Admin'), ('user', 'User')], default='user', max_length=20)),
                ('first_name', models.CharField(max_length=50)),
                ('middle_name', models.CharField(blank=True, max_length=50, null=True)),
                ('last_name', models.CharField(max_length=50)),
                ('gender', models.CharField(choices=[('male', 'Male'), ('female', 'Female'), ('other', 'Other')], max_length=10)),
                ('dob', models.DateField()),
                ('is_mobile_verified', models.BooleanField(default=False)),
                ('is_email_verified', models.BooleanField(default=False)),
                ('is_kyc_complete', models.BooleanField(default=False)),
                ('kyc_verification_step', models.IntegerField(default=0, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(4)])),
                ('is_aadhaar_verified', models.BooleanField(default=False)),
                ('is_pan_verified', models.BooleanField(default=False)),
                ('is_bank_verified', models.BooleanField(default=False)),
                ('is_active', models.BooleanField(default=False)),
                ('is_staff', models.BooleanField(default=False)),
                ('is_superuser', models.BooleanField(default=False)),
                ('user_blocked', models.IntegerField(default=0)),
                ('user_block_reason', models.TextField(blank=True, null=True)),
                ('blocked_until', models.DateTimeField(blank=True, null=True)),
                ('email_otp_attempts', models.IntegerField(default=0)),
                ('mobile_otp_attempts', models.IntegerField(default=0)),
                ('email_blocked_until', models.DateTimeField(blank=True, null=True)),
                ('mobile_blocked_until', models.DateTimeField(blank=True, null=True)),
                ('address_line1', models.CharField(blank=True, max_length=255)),
                ('address_line2', models.CharField(blank=True, max_length=255, null=True)),
                ('address_line3', models.CharField(blank=True, max_length=255, null=True)),
                ('city', models.CharField(blank=True, max_length=100)),
                ('state', models.CharField(blank=True, max_length=100)),
                ('country', models.CharField(default='India', max_length=100)),
                ('pincode', models.CharField(blank=True, max_length=6)),
                ('register_device_ip', models.GenericIPAddressField()),
                ('register_device_info', models.JSONField(default=dict)),
                ('last_login', models.DateTimeField(blank=True, null=True)),
                ('last_login_ip', models.GenericIPAddressField(blank=True, null=True)),
                ('password_changed_at', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('updated_last_field', models.CharField(blank=True, max_length=100, null=True)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('registration_step', models.IntegerField(default=0)),
                ('registration_data', models.JSONField(default=dict)),
                ('branch_code', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='users', to='accounts.branch')),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='deleted_users', to='accounts.useraccount')),
            ],
            options={
                'verbose_name': 'User Account',
                'verbose_name_plural': 'User Accounts',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='SecuritySettings',
            fields=[
                ('id', models.CharField(max_length=16, primary_key=True, serialize=False)),
                ('two_factor_enabled', models.BooleanField(default=False)),
                ('two_factor_method', models.CharField(blank=True, choices=[('sms', 'SMS'), ('email', 'Email'), ('authenticator', 'Authenticator App')], max_length=20, null=True)),
                ('login_notification_enabled', models.BooleanField(default=True)),
                ('suspicious_activity_alert', models.BooleanField(default=True)),
                ('allowed_ip_whitelist', models.JSONField(blank=True, null=True)),
                ('password_expiry_days', models.IntegerField(default=90)),
                ('last_password_change', models.DateTimeField(blank=True, null=True)),
                ('failed_login_attempts', models.IntegerField(default=0)),
                ('account_locked_until', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('user_code', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='security_settings', to='accounts.useraccount')),
            ],
            options={
                'verbose_name': 'Security Settings',
                'verbose_name_plural': 'Security Settings',
            },
        ),
        migrations.CreateModel(
            name='RegistrationProgress',
            fields=[
                ('id', models.CharField(max_length=16, primary_key=True, serialize=False)),
                ('current_step', models.IntegerField()),
                ('steps_completed', models.JSONField(default=list)),
                ('step_data', models.JSONField(default=dict)),
                ('last_completed_step', models.IntegerField(default=0)),
                ('abandoned', models.BooleanField(default=False)),
                ('abandoned_at', models.DateTimeField(blank=True, null=True)),
                ('last_active_at', models.DateTimeField(auto_now=True, db_index=True)),
                ('started_at', models.DateTimeField(auto_now_add=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('user_code', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='registration_progress', to='accounts.useraccount')),
            ],
            options={
                'verbose_name': 'Registration Progress',
                'verbose_name_plural': 'Registration Progress',
                'ordering': ['-last_active_at'],
            },
        ),
        migrations.CreateModel(
            name='PANKYC',
            fields=[
                ('id', models.CharField(max_length=16, primary_key=True, serialize=False)),
                ('pan_number', models.CharField(max_length=10)),
                ('pan_name', models.CharField(max_length=100)),
                ('pan_father_name', models.CharField(max_length=100)),
                ('pan_dob', models.DateField()),
                ('pan_image', models.FileField(upload_to='kyc/pan/')),
                ('verification_method', models.CharField(choices=[('manual', 'Manual'), ('api_digilocker', 'DigiLocker API'), ('api_uidai', 'UIDAI API'), ('api_nsdl', 'NSDL API'), ('api_karza', 'Karza API'), ('offline_xml', 'Offline XML')], default='manual', max_length=20)),
                ('is_verified', models.BooleanField(db_index=True, default=False)),
                ('verified_at', models.DateTimeField(blank=True, null=True)),
                ('verification_remarks', models.TextField(blank=True, null=True)),
                ('api_response', models.JSONField(blank=True, null=True)),
                ('name_match_score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('submitted_at', models.DateTimeField(blank=True, null=True)),
                ('user_code', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='pan_kyc', to='accounts.useraccount')),
                ('verified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='verified_pan_records', to='accounts.useraccount')),
            ],
            options={
                'verbose_name': 'PAN KYC',
                'verbose_name_plural': 'PAN KYCs',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='OTPRecord',
            fields=[
                ('id', models.BigAutoField(primary_key=True, serialize=False)),
                ('otp_type', models.CharField(choices=[('email', 'Email'), ('mobile', 'Mobile'), ('both', 'Both Email and Mobile'), ('aadhaar', 'Aadhaar'), ('bank_phone', 'Bank Phone'), ('bank_email', 'Bank Email'), ('business_phone', 'Business Phone'), ('business_email', 'Business Email')], db_index=True, max_length=20)),
                ('otp_purpose', models.CharField(choices=[('registration', 'Registration'), ('login', 'Login'), ('forgot_password', 'Forgot Password'), ('reset_password', 'Reset Password'), ('email_verification', 'Email Verification'), ('mobile_verification', 'Mobile Verification'), ('aadhaar_verification', 'Aadhaar Verification'), ('bank_verification', 'Bank Verification'), ('business_verification', 'Business Verification')], db_index=True, max_length=30)),
                ('otp_code', models.CharField(max_length=128)),
                ('email_otp', models.CharField(blank=True, max_length=128, null=True)),
                ('mobile_otp', models.CharField(blank=True, max_length=128, null=True)),
                ('sent_to_email', models.EmailField(blank=True, max_length=254, null=True)),
                ('sent_to_mobile', models.CharField(blank=True, max_length=15, null=True)),
                ('is_used', models.BooleanField(db_index=True, default=False)),
                ('verified_at', models.DateTimeField(blank=True, null=True)),
                ('sent_at', models.DateTimeField(auto_now_add=True)),
                ('expires_at', models.DateTimeField(db_index=True)),
                ('attempt_count', models.IntegerField(default=0)),
                ('ip_address', models.GenericIPAddressField()),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('user_code', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='otp_records', to='accounts.useraccount')),
            ],
            options={
                'verbose_name': 'OTP Record',
                'verbose_name_plural': 'OTP Records',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='LoginActivity',
            fields=[
                ('id', models.CharField(max_length=16, primary_key=True, serialize=False)),
                ('login_identifier', models.CharField(max_length=255)),
                ('ip_address', models.GenericIPAddressField(db_index=True)),
                ('user_agent', models.TextField()),
                ('device_info', models.JSONField()),
                ('location_info', models.JSONField(blank=True, null=True)),
                ('status', models.CharField(choices=[('success', 'Success'), ('failed_password', 'Failed - Wrong Password'), ('failed_blocked', 'Failed - User Blocked'), ('failed_inactive', 'Failed - User Inactive'), ('failed_not_found', 'Failed - User Not Found')], db_index=True, max_length=30)),
                ('failure_reason', models.CharField(blank=True, max_length=255, null=True)),
                ('session_token', models.CharField(blank=True, max_length=255, null=True)),
                ('login_timestamp', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('logout_timestamp', models.DateTimeField(blank=True, null=True)),
                ('session_duration', models.DurationField(blank=True, null=True)),
                ('is_suspicious', models.BooleanField(default=False)),
                ('risk_score', models.IntegerField(default=0, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('user_code', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='login_activities', to='accounts.useraccount')),
            ],
            options={
                'verbose_name': 'Login Activity',
                'verbose_name_plural': 'Login Activities',
                'ordering': ['-login_timestamp'],
            },
        ),
        migrations.CreateModel(
            name='BusinessDetails',
            fields=[
                ('id', models.CharField(max_length=16, primary_key=True, serialize=False)),
                ('user_selfie', models.FileField(upload_to='business/selfies/')),
                ('selfie_verified', models.BooleanField(default=False)),
                ('business_name', models.CharField(max_length=200)),
                ('business_type', models.CharField(choices=[('sole_proprietorship', 'Sole Proprietorship'), ('partnership', 'Partnership'), ('private_limited', 'Private Limited'), ('public_limited', 'Public Limited'), ('llp', 'Limited Liability Partnership'), ('ngo', 'NGO'), ('trust', 'Trust'), ('huf', 'Hindu Undivided Family')], max_length=50)),
                ('business_registration_number', models.CharField(blank=True, max_length=50, null=True)),
                ('business_address_line1', models.CharField(max_length=255)),
                ('business_address_line2', models.CharField(blank=True, max_length=255, null=True)),
                ('business_address_line3', models.CharField(blank=True, max_length=255, null=True)),
                ('city', models.CharField(max_length=100)),
                ('state', models.CharField(max_length=100)),
                ('country', models.CharField(default='India', max_length=100)),
                ('pincode', models.CharField(max_length=6)),
                ('business_phone', models.CharField(max_length=15)),
                ('business_phone_otp_attempts', models.IntegerField(default=0)),
                ('business_phone_blocked_until', models.DateTimeField(blank=True, null=True)),
                ('is_business_phone_verified', models.BooleanField(default=False)),
                ('business_email', models.EmailField(max_length=254)),
                ('business_email_otp_attempts', models.IntegerField(default=0)),
                ('business_email_blocked_until', models.DateTimeField(blank=True, null=True)),
                ('is_business_email_verified', models.BooleanField(default=False)),
                ('business_proof_image', models.FileField(upload_to='business/proofs/')),
                ('is_verified', models.BooleanField(db_index=True, default=False)),
                ('verified_at', models.DateTimeField(blank=True, null=True)),
                ('verification_remarks', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('user_code', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='business_details', to='accounts.useraccount')),
                ('verified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='verified_business_records', to='accounts.useraccount')),
            ],
            options={
                'verbose_name': 'Business Details',
                'verbose_name_plural': 'Business Details',
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddField(
            model_name='branch',
            name='created_by',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='created_branches', to='accounts.useraccount'),
        ),
        migrations.AddField(
            model_name='branch',
            name='deleted_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='deleted_branches', to='accounts.useraccount'),
        ),
        migrations.AddField(
            model_name='branch',
            name='manager_user_code',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='managed_branches', to='accounts.useraccount'),
        ),
        migrations.CreateModel(
            name='BankDetails',
            fields=[
                ('id', models.CharField(max_length=16, primary_key=True, serialize=False)),
                ('account_holder_name', models.CharField(max_length=100)),
                ('account_number_encrypted', models.TextField()),
                ('account_number_last4', models.CharField(max_length=4)),
                ('ifsc_code', models.CharField(max_length=11)),
                ('account_type', models.CharField(choices=[('savings', 'Savings'), ('current', 'Current'), ('fixed_deposit', 'Fixed Deposit'), ('recurring_deposit', 'Recurring Deposit')], max_length=20)),
                ('bank_name', models.CharField(max_length=100)),
                ('branch_name', models.CharField(max_length=100)),
                ('branch_address', models.CharField(blank=True, max_length=255, null=True)),
                ('bank_proof_image', models.FileField(upload_to='bank/proofs/')),
                ('verification_method', models.CharField(choices=[('penny_drop', 'Penny Drop'), ('manual', 'Manual'), ('bank_statement', 'Bank Statement')], default='penny_drop', max_length=20)),
                ('penny_drop_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('penny_drop_reference', models.CharField(blank=True, max_length=50, null=True)),
                ('is_verified', models.BooleanField(db_index=True, default=False)),
                ('verified_at', models.DateTimeField(blank=True, null=True)),
                ('verification_remarks', models.TextField(blank=True, null=True)),
                ('api_response', models.JSONField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('user_code', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='bank_details', to='accounts.useraccount')),
                ('verified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='verified_bank_records', to='accounts.useraccount')),
            ],
            options={
                'verbose_name': 'Bank Details',
                'verbose_name_plural': 'Bank Details',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='AuditTrail',
            fields=[
                ('id', models.CharField(max_length=16, primary_key=True, serialize=False)),
                ('action', models.CharField(choices=[('create', 'Create'), ('update', 'Update'), ('delete', 'Delete'), ('login', 'Login'), ('logout', 'Logout'), ('otp_request', 'OTP Request'), ('otp_verify', 'OTP Verify'), ('kyc_submit', 'KYC Submit'), ('kyc_approve', 'KYC Approve'), ('kyc_reject', 'KYC Reject'), ('password_change', 'Password Change'), ('role_change', 'Role Change'), ('access_grant', 'Access Grant'), ('access_revoke', 'Access Revoke'), ('user_block', 'User Block'), ('user_unblock', 'User Unblock')], db_index=True, max_length=30)),
                ('resource_type', models.CharField(db_index=True, max_length=50)),
                ('resource_id', models.CharField(blank=True, max_length=50, null=True)),
                ('resource_identifier', models.CharField(blank=True, max_length=100, null=True)),
                ('description', models.TextField()),
                ('old_values', models.JSONField(blank=True, null=True)),
                ('new_values', models.JSONField(blank=True, null=True)),
                ('changed_fields', models.JSONField(blank=True, null=True)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True, null=True)),
                ('request_method', models.CharField(blank=True, max_length=10, null=True)),
                ('request_path', models.CharField(blank=True, max_length=255, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('user_code', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='audit_trails', to='accounts.useraccount')),
            ],
            options={
                'verbose_name': 'Audit Trail',
                'verbose_name_plural': 'Audit Trails',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='AppFeature',
            fields=[
                ('id', models.BigAutoField(primary_key=True, serialize=False)),
                ('feature_code', models.CharField(db_index=True, max_length=4, unique=True)),
                ('feature_name', models.CharField(max_length=100)),
                ('feature_description', models.TextField()),
                ('feature_category', models.CharField(max_length=50)),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('parent_feature', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='sub_features', to='accounts.appfeature')),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='created_features', to='accounts.useraccount')),
                ('deleted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='deleted_features', to='accounts.useraccount')),
            ],
            options={
                'verbose_name': 'App Feature',
                'verbose_name_plural': 'App Features',
                'ordering': ['feature_name'],
            },
        ),
        migrations.CreateModel(
            name='AppAccessControl',
            fields=[
                ('id', models.CharField(max_length=16, primary_key=True, serialize=False)),
                ('is_allowed', models.BooleanField(default=False)),
                ('access_level', models.CharField(choices=[('full', 'Full Access'), ('read_only', 'Read Only'), ('restricted', 'Restricted'), ('create_only', 'Create Only'), ('update_only', 'Update Only')], max_length=20)),
                ('granted_at', models.DateTimeField(auto_now_add=True)),
                ('expires_at', models.DateTimeField(blank=True, null=True)),
                ('revoked_at', models.DateTimeField(blank=True, null=True)),
                ('feature', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='user_access', to='accounts.appfeature')),
                ('granted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='granted_feature_access', to='accounts.useraccount')),
                ('revoked_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='revoked_feature_access', to='accounts.useraccount')),
                ('user_code', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='feature_access', to='accounts.useraccount')),
            ],
            options={
                'verbose_name': 'App Access Control',
                'verbose_name_plural': 'App Access Controls',
            },
        ),
        migrations.CreateModel(
            name='AadhaarKYC',
            fields=[
                ('id', models.CharField(max_length=16, primary_key=True, serialize=False)),
                ('aadhaar_number_encrypted', models.TextField()),
                ('aadhaar_name', models.CharField(max_length=100)),
                ('aadhaar_dob', models.DateField()),
                ('aadhaar_gender', models.CharField(max_length=10)),
                ('aadhaar_address', models.TextField()),
                ('aadhaar_front_image', models.FileField(blank=True, null=True, upload_to='kyc/aadhaar/front/')),
                ('aadhaar_back_image', models.FileField(blank=True, null=True, upload_to='kyc/aadhaar/back/')),
                ('aadhaar_xml_file', models.FileField(blank=True, null=True, upload_to='kyc/aadhaar/xml/')),
                ('aadhaar_otp_request_id', models.CharField(blank=True, max_length=50, null=True)),
                ('aadhaar_otp_attempts', models.IntegerField(default=0)),
                ('aadhaar_blocked_until', models.DateTimeField(blank=True, null=True)),
                ('verification_method', models.CharField(choices=[('manual', 'Manual'), ('api_digilocker', 'DigiLocker API'), ('api_uidai', 'UIDAI API'), ('api_nsdl', 'NSDL API'), ('api_karza', 'Karza API'), ('offline_xml', 'Offline XML')], default='manual', max_length=20)),
                ('is_verified', models.BooleanField(db_index=True, default=False)),
                ('verified_at', models.DateTimeField(blank=True, null=True)),
                ('verification_remarks', models.TextField(blank=True, null=True)),
                ('api_response', models.JSONField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('submitted_at', models.DateTimeField(blank=True, null=True)),
                ('user_code', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='aadhaar_kyc', to='accounts.useraccount')),
                ('verified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='verified_aadhaar_records', to='accounts.useraccount')),
            ],
            options={
                'verbose_name': 'Aadhaar KYC',
                'verbose_name_plural': 'Aadhaar KYCs',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='UserPlatformAccess',
            fields=[
                ('id', models.CharField(max_length=16, primary_key=True, serialize=False)),
                ('platform', models.CharField(choices=[('web', 'Web'), ('mobile_app', 'Mobile App'), ('admin_panel', 'Admin Panel'), ('api', 'API'), ('pos_terminal', 'POS Terminal')], db_index=True, max_length=20)),
                ('is_allowed', models.BooleanField(default=True)),
                ('access_level', models.CharField(choices=[('full', 'Full Access'), ('read_only', 'Read Only'), ('restricted', 'Restricted'), ('create_only', 'Create Only'), ('update_only', 'Update Only')], max_length=20)),
                ('allowed_ip_ranges', models.JSONField(blank=True, null=True)),
                ('granted_at', models.DateTimeField(auto_now_add=True)),
                ('revoked_at', models.DateTimeField(blank=True, null=True)),
                ('revocation_reason', models.TextField(blank=True, null=True)),
                ('granted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='granted_platform_access', to='accounts.useraccount')),
                ('revoked_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='revoked_platform_access', to='accounts.useraccount')),
                ('user_code', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='platform_access', to='accounts.useraccount')),
            ],
            options={
                'verbose_name': 'User Platform Access',
                'verbose_name_plural': 'User Platform Access',
            },
        ),
        migrations.AddIndex(
            model_name='useraccount',
            index=models.Index(fields=['email'], name='accounts_us_email_9b1294_idx'),
        ),
        migrations.AddIndex(
            model_name='useraccount',
            index=models.Index(fields=['mobile'], name='accounts_us_mobile_8fc442_idx'),
        ),
        migrations.AddIndex(
            model_name='useraccount',
            index=models.Index(fields=['user_code'], name='accounts_us_user_co_b609c1_idx'),
        ),
        migrations.AddIndex(
            model_name='useraccount',
            index=models.Index(fields=['is_active'], name='accounts_us_is_acti_43b405_idx'),
        ),
        migrations.AddIndex(
            model_name='useraccount',
            index=models.Index(fields=['user_role'], name='accounts_us_user_ro_b64f88_idx'),
        ),
        migrations.AddIndex(
            model_name='securitysettings',
            index=models.Index(fields=['user_code'], name='accounts_se_user_co_70cd49_idx'),
        ),
        migrations.AddIndex(
            model_name='registrationprogress',
            index=models.Index(fields=['user_code'], name='accounts_re_user_co_d59ab7_idx'),
        ),
        migrations.AddIndex(
            model_name='registrationprogress',
            index=models.Index(fields=['current_step'], name='accounts_re_current_db78ce_idx'),
        ),
        migrations.AddIndex(
            model_name='registrationprogress',
            index=models.Index(fields=['last_active_at'], name='accounts_re_last_ac_c9a4f5_idx'),
        ),
        migrations.AddIndex(
            model_name='pankyc',
            index=models.Index(fields=['user_code'], name='accounts_pa_user_co_9d2dae_idx'),
        ),
        migrations.AddIndex(
            model_name='pankyc',
            index=models.Index(fields=['is_verified'], name='accounts_pa_is_veri_d7d9c0_idx'),
        ),
        migrations.AddIndex(
            model_name='pankyc',
            index=models.Index(fields=['pan_number'], name='accounts_pa_pan_num_f1dd7f_idx'),
        ),
        migrations.AddIndex(
            model_name='otprecord',
            index=models.Index(fields=['user_code'], name='accounts_ot_user_co_9c2c00_idx'),
        ),
        migrations.AddIndex(
            model_name='otprecord',
            index=models.Index(fields=['otp_type'], name='accounts_ot_otp_typ_416cb8_idx'),
        ),
        migrations.AddIndex(
            model_name='otprecord',
            index=models.Index(fields=['otp_purpose'], name='accounts_ot_otp_pur_945df9_idx'),
        ),
        migrations.AddIndex(
            model_name='otprecord',
            index=models.Index(fields=['is_used'], name='accounts_ot_is_used_0b9d6c_idx'),
        ),
        migrations.AddIndex(
            model_name='otprecord',
            index=models.Index(fields=['expires_at'], name='accounts_ot_expires_d7f938_idx'),
        ),
        migrations.AddIndex(
            model_name='loginactivity',
            index=models.Index(fields=['user_code'], name='accounts_lo_user_co_458cd1_idx'),
        ),
        migrations.AddIndex(
            model_name='loginactivity',
            index=models.Index(fields=['login_timestamp'], name='accounts_lo_login_t_6de085_idx'),
        ),
        migrations.AddIndex(
            model_name='loginactivity',
            index=models.Index(fields=['ip_address'], name='accounts_lo_ip_addr_451012_idx'),
        ),
        migrations.AddIndex(
            model_name='loginactivity',
            index=models.Index(fields=['status'], name='accounts_lo_status_1f3c8d_idx'),
        ),
        migrations.AddIndex(
            model_name='businessdetails',
            index=models.Index(fields=['user_code'], name='accounts_bu_user_co_e44d60_idx'),
        ),
        migrations.AddIndex(
            model_name='businessdetails',
            index=models.Index(fields=['is_verified'], name='accounts_bu_is_veri_c32255_idx'),
        ),
        migrations.AddIndex(
            model_name='branch',
            index=models.Index(fields=['branch_code'], name='accounts_br_branch__22dddc_idx'),
        ),
        migrations.AddIndex(
            model_name='branch',
            index=models.Index(fields=['is_active'], name='accounts_br_is_acti_ddea38_idx'),
        ),
        migrations.AddIndex(
            model_name='branch',
            index=models.Index(fields=['referred_by'], name='accounts_br_referre_022988_idx'),
        ),
        migrations.AddIndex(
            model_name='bankdetails',
            index=models.Index(fields=['user_code'], name='accounts_ba_user_co_5367f7_idx'),
        ),
        migrations.AddIndex(
            model_name='bankdetails',
            index=models.Index(fields=['is_verified'], name='accounts_ba_is_veri_dbfdf2_idx'),
        ),
        migrations.AddIndex(
            model_name='audittrail',
            index=models.Index(fields=['user_code'], name='accounts_au_user_co_df95e9_idx'),
        ),
        migrations.AddIndex(
            model_name='audittrail',
            index=models.Index(fields=['action'], name='accounts_au_action_c158c2_idx'),
        ),
        migrations.AddIndex(
            model_name='audittrail',
            index=models.Index(fields=['resource_type'], name='accounts_au_resourc_fb5abf_idx'),
        ),
        migrations.AddIndex(
            model_name='audittrail',
            index=models.Index(fields=['resource_id'], name='accounts_au_resourc_289745_idx'),
        ),
        migrations.AddIndex(
            model_name='audittrail',
            index=models.Index(fields=['created_at'], name='accounts_au_created_9272b1_idx'),
        ),
        migrations.AddIndex(
            model_name='appfeature',
            index=models.Index(fields=['feature_code'], name='accounts_ap_feature_faf993_idx'),
        ),
        migrations.AddIndex(
            model_name='appfeature',
            index=models.Index(fields=['is_active'], name='accounts_ap_is_acti_2a3be8_idx'),
        ),
        migrations.AddIndex(
            model_name='appfeature',
            index=models.Index(fields=['parent_feature'], name='accounts_ap_parent__e5fd5d_idx'),
        ),
        migrations.AddIndex(
            model_name='appaccesscontrol',
            index=models.Index(fields=['user_code'], name='accounts_ap_user_co_5091c5_idx'),
        ),
        migrations.AddIndex(
            model_name='appaccesscontrol',
            index=models.Index(fields=['feature'], name='accounts_ap_feature_ece7af_idx'),
        ),
        migrations.AddIndex(
            model_name='appaccesscontrol',
            index=models.Index(fields=['is_allowed'], name='accounts_ap_is_allo_0f6e7a_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='appaccesscontrol',
            unique_together={('user_code', 'feature')},
        ),
        migrations.AddIndex(
            model_name='aadhaarkyc',
            index=models.Index(fields=['user_code'], name='accounts_aa_user_co_9eef9d_idx'),
        ),
        migrations.AddIndex(
            model_name='aadhaarkyc',
            index=models.Index(fields=['is_verified'], name='accounts_aa_is_veri_65f74b_idx'),
        ),
        migrations.AddIndex(
            model_name='userplatformaccess',
            index=models.Index(fields=['user_code'], name='accounts_us_user_co_2c9103_idx'),
        ),
        migrations.AddIndex(
            model_name='userplatformaccess',
            index=models.Index(fields=['platform'], name='accounts_us_platfor_45ad8b_idx'),
        ),
        migrations.AddIndex(
            model_name='userplatformaccess',
            index=models.Index(fields=['is_allowed'], name='accounts_us_is_allo_eaa716_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='userplatformaccess',
            unique_together={('user_code', 'platform')},
        ),
    ]
