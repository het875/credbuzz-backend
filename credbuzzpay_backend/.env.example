# Environment Variables - Copy & Configure Guide

## üìù How to Use This File

1. Copy this entire content
2. Create `.env` file on your server at: `/var/www/credbuzz-backend/credbuzzpay_backend/.env`
3. Replace all placeholder values with your actual production values
4. Save and secure the file: `chmod 600 .env`

---

## üîß Production Environment Variables

```bash
# =============================================================================
# DJANGO CORE SETTINGS
# =============================================================================

# CRITICAL: Set to False in production!
DEBUG=False

# Generate using: python3 -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
SECRET_KEY=django-insecure-REPLACE-WITH-YOUR-RANDOM-SECRET-KEY-MINIMUM-50-CHARACTERS

# Your server IP and any domains (comma-separated, no spaces)
ALLOWED_HOSTS=80.225.194.105,localhost,127.0.0.1


# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Option 1: PostgreSQL (RECOMMENDED for production)
DATABASE_URL=postgresql://credbuzz_user:YOUR_DB_PASSWORD_HERE@localhost:5432/credbuzz_db

# Option 2: SQLite (NOT recommended for production, but works)
# DATABASE_URL=sqlite:///db.sqlite3


# =============================================================================
# JWT AUTHENTICATION
# =============================================================================

# MUST be different from SECRET_KEY! Generate a new random string
JWT_SECRET_KEY=jwt-secret-REPLACE-WITH-DIFFERENT-RANDOM-STRING-MINIMUM-50-CHARACTERS

# Token expiry times (in minutes/days)
JWT_ACCESS_TOKEN_EXPIRY_MINUTES=60
JWT_REFRESH_TOKEN_EXPIRY_DAYS=7
JWT_INACTIVITY_TIMEOUT_MINUTES=30


# =============================================================================
# EMAIL CONFIGURATION (Gmail SMTP)
# =============================================================================

EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True

# Your Gmail account
EMAIL_HOST_USER=your-email@gmail.com

# For Gmail, use App Password (not your regular password)
# Create one at: https://myaccount.google.com/apppasswords
EMAIL_HOST_PASSWORD=your-16-character-app-password

DEFAULT_FROM_EMAIL=CredBuzz <your-email@gmail.com>


# =============================================================================
# OTP SETTINGS
# =============================================================================

OTP_EXPIRY_MINUTES=10
OTP_LENGTH=6

# Mobile OTP Verification Control
# Set to True to require mobile OTP verification (recommended for production)
# Set to False to bypass mobile OTP (only email OTP required - useful for development/testing)
REQUIRE_MOBILE_VERIFICATION=False


# =============================================================================
# CORS SETTINGS
# =============================================================================

# Your frontend URLs (comma-separated, no spaces)
# Include http:// or https:// prefix
CORS_ALLOWED_ORIGINS=http://80.225.194.105,https://yourdomain.com,http://localhost:3000


# =============================================================================
# OPTIONAL: TWILIO (for SMS OTP)
# =============================================================================

# Uncomment and fill if using Twilio
# TWILIO_ACCOUNT_SID=your_twilio_account_sid
# TWILIO_AUTH_TOKEN=your_twilio_auth_token
# TWILIO_PHONE_NUMBER=+1234567890


# =============================================================================
# OPTIONAL: AWS S3 (for media files storage)
# =============================================================================

# Uncomment if using AWS S3 for media files
# AWS_ACCESS_KEY_ID=your_aws_access_key
# AWS_SECRET_ACCESS_KEY=your_aws_secret_key
# AWS_STORAGE_BUCKET_NAME=your-bucket-name
# AWS_S3_REGION_NAME=us-east-1


# =============================================================================
# OPTIONAL: SENTRY (for error tracking)
# =============================================================================

# Uncomment if using Sentry for error monitoring
# SENTRY_DSN=https://your-sentry-dsn-here

```

---

## ‚úÖ Verification Steps

After creating your `.env` file, verify it's configured correctly:

### 1. Check file exists and has correct permissions
```bash
ls -la /var/www/credbuzz-backend/credbuzzpay_backend/.env
# Should show: -rw------- (600 permissions)
```

### 2. Test environment loading
```bash
cd /var/www/credbuzz-backend/credbuzzpay_backend
source /var/www/credbuzz-backend/venv/bin/activate
python3 << EOF
import os
from dotenv import load_dotenv
load_dotenv('.env')
print("DEBUG:", os.getenv('DEBUG'))
print("SECRET_KEY set:", bool(os.getenv('SECRET_KEY')))
print("ALLOWED_HOSTS:", os.getenv('ALLOWED_HOSTS'))
print("DATABASE_URL set:", bool(os.getenv('DATABASE_URL')))
EOF
```

### 3. Test Django settings
```bash
python manage.py check --deploy
```

---

## üîë How to Generate SECRET_KEY

```bash
# Run this command to generate a secure random key:
python3 -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"

# Example output (DO NOT USE THIS - generate your own!):
# django-insecure-7_m!+n8#2k@x$p9q*5r&t1u^v2w(x3y)z4a-b5c=d6e~f7g
```

**Generate TWO different keys:**
1. One for `SECRET_KEY`
2. Another for `JWT_SECRET_KEY`

---

## üìß Gmail App Password Setup

If using Gmail for email:

1. Go to: https://myaccount.google.com/security
2. Enable 2-Factor Authentication (required)
3. Go to: https://myaccount.google.com/apppasswords
4. Create new App Password for "Mail"
5. Copy the 16-character password (no spaces)
6. Use this as `EMAIL_HOST_PASSWORD`

---

## üóÑÔ∏è Database Setup Example

### PostgreSQL Setup Commands:
```bash
# Switch to postgres user
sudo -u postgres psql

# Create database and user
CREATE DATABASE credbuzz_db;
CREATE USER credbuzz_user WITH PASSWORD 'YourSecurePasswordHere';

# Grant privileges
ALTER ROLE credbuzz_user SET client_encoding TO 'utf8';
ALTER ROLE credbuzz_user SET default_transaction_isolation TO 'read committed';
ALTER ROLE credbuzz_user SET timezone TO 'UTC';
GRANT ALL PRIVILEGES ON DATABASE credbuzz_db TO credbuzz_user;

# Exit
\q
```

### Then update .env:
```bash
DATABASE_URL=postgresql://credbuzz_user:YourSecurePasswordHere@localhost:5432/credbuzz_db
```

---

## üîç Common Mistakes to Avoid

‚ùå **Don't:**
- Use the default SECRET_KEY from settings.py
- Leave DEBUG=True in production
- Use ALLOWED_HOSTS=* in production
- Use CORS_ALLOW_ALL_ORIGINS=True in production
- Commit .env file to git
- Use weak passwords
- Share .env file contents

‚úÖ **Do:**
- Generate new random SECRET_KEY and JWT_SECRET_KEY
- Set DEBUG=False
- Specify exact hosts in ALLOWED_HOSTS
- Specify exact origins in CORS_ALLOWED_ORIGINS
- Keep .env file permissions at 600
- Use strong, unique passwords
- Keep .env file secure and private

---

## üõ°Ô∏è Security Checklist

- [ ] Generated new SECRET_KEY (not default)
- [ ] Generated new JWT_SECRET_KEY (different from SECRET_KEY)
- [ ] DEBUG=False
- [ ] ALLOWED_HOSTS contains only your server IP/domain
- [ ] CORS_ALLOWED_ORIGINS contains only your frontend URL(s)
- [ ] Database password is strong (12+ chars, mixed case, numbers, symbols)
- [ ] .env file permissions set to 600
- [ ] .env file NOT in git repository
- [ ] Email using App Password (if Gmail)
- [ ] All sensitive values replaced (no placeholders)

---

## üìû Need Help?

If you're stuck:
1. Check the full guide: [PRODUCTION_DEPLOYMENT.md](PRODUCTION_DEPLOYMENT.md)
2. Verify settings: `python manage.py check --deploy`
3. Check logs: `sudo journalctl -u credbuzz-backend -f`

---

**Server IP:** 80.225.194.105  
**Last Updated:** January 3, 2026
